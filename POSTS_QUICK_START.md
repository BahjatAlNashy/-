# ๐ ูุดุงุฑูุงุช ุงูุฒูุงุฑ (Posts) - ุฏููู ุณุฑูุน

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู **ูุดุงุฑูุงุช ุงูุฒูุงุฑ** ูู ููุตุฉ ุจุณูุทุฉ ุชุณูุญ ูููุณุชุฎุฏููู ุงููุณุฌููู ุจูุดุงุฑูุฉ ูุตูุต.

### โจ ุงูููุฒุงุช
- โ CRUD ูุงูู (ุฅูุดุงุกุ ูุฑุงุกุฉุ ุชุญุฏูุซุ ุญุฐู)
- โ Pagination
- โ ุงูุจุญุซ ุจุงููููุฉ ุงูููุชุงุญูุฉ
- โ ูุณุชุฎุฏููู ูุณุฌููู ููุท ููุฅูุดุงุก/ุงูุชุญุฏูุซ/ุงูุญุฐู
- โ ุงูุฌููุน ูููููู ุงููุฑุงุกุฉ
- โ **ุจุฏูู ุชุนูููุงุช** (ูุธุงู ุจุณูุท)
- โ **ุจุฏูู ููุถูุฉ** (ูุธุงู ุจุณูุท)

---

## ๐ ุฌููุน Endpoints

| Method | Endpoint | Auth | ุงููุตู |
|--------|----------|------|-------|
| GET | `/api/posts` | โ | ุนุฑุถ ุงููุดุงุฑูุงุช ุงูููุงูู ุนูููุง |
| GET | `/api/posts/search` | โ | ุจุญุซ ูู ุงููุดุงุฑูุงุช ุงูููุงูู ุนูููุง |
| GET | `/api/posts/my-posts` | โ | ูุดุงุฑูุงุชู (ููุงูู + ุบูุฑ ููุงูู) |
| GET | `/api/posts/pending` | โ | ุงููุดุงุฑูุงุช ูู ุงูุชุธุงุฑ ุงูููุงููุฉ (Admin) |
| GET | `/api/posts/{id}` | โ | ุนุฑุถ ูุดุงุฑูุฉ ูุงุญุฏุฉ |
| POST | `/api/posts` | โ | ุฅูุดุงุก ูุดุงุฑูุฉ ุฌุฏูุฏุฉ |
| POST | `/api/posts/{id}/update` | โ | ุชุญุฏูุซ ูุดุงุฑูุฉ (ุงููุงูู) |
| POST | `/api/posts/{id}/approve` | โ | ุงูููุงููุฉ/ุฑูุถ (Admin ููุท) |
| DELETE | `/api/posts/{id}` | โ | ุญุฐู ูุดุงุฑูุฉ (ุงููุงูู ุฃู Admin) |

---

## ๐ ุงูุงุณุชุฎุฏุงู ุงูุชูุตููู

### 1๏ธโฃ ุนุฑุถ ุฌููุน ุงููุดุงุฑูุงุช

```bash
GET /api/posts
```

**Response:**
```json
{
  "success": true,
  "data": {
    "current_page": 1,
    "data": [
      {
        "id": 1,
        "content": "ูุดุงุฑูุฉ ุฑุงุฆุนุฉ ูู ุงูุฒุงุฆุฑ...",
        "author_name": "ุฃุญูุฏ",
        "author_id": 5,
        "created_at": "ููุฐ ุฏูููุชูู"
      }
    ],
    "per_page": 15,
    "total": 50
  }
}
```

---

### 2๏ธโฃ ุนุฑุถ ูุดุงุฑูุฉ ูุงุญุฏุฉ

```bash
GET /api/posts/1
```

**Response:**
```json
{
  "success": true,
  "data": {
    "id": 1,
    "content": "ูุดุงุฑูุฉ ุฑุงุฆุนุฉ ูู ุงูุฒุงุฆุฑ...",
    "author_name": "ุฃุญูุฏ",
    "author_id": 5,
    "created_at": "2024-10-14 15:30:00"
  }
}
```

---

### 3๏ธโฃ ุฅูุดุงุก ูุดุงุฑูุฉ ุฌุฏูุฏุฉ

```bash
POST /api/posts
Headers: Authorization: Bearer YOUR_TOKEN
Body: form-data
  content: "ูุฐู ูุดุงุฑูุชู ุงูุฌุฏูุฏุฉ..."
```

**Validation:**
- `content`: required, string, min:10, max:2000

**Response:**
```json
{
  "success": true,
  "message": "ุชู ุฅูุดุงุก ุงููุดุงุฑูุฉ ุจูุฌุงุญ",
  "data": {
    "id": 10,
    "content": "ูุฐู ูุดุงุฑูุชู ุงูุฌุฏูุฏุฉ...",
    "author_name": "ุฃุญูุฏ",
    "author_id": 5,
    "created_at": "2024-10-14 15:30:00"
  }
}
```

---

### 4๏ธโฃ ุชุญุฏูุซ ูุดุงุฑูุฉ

```bash
POST /api/posts/1/update
Headers: Authorization: Bearer YOUR_TOKEN
Body: form-data
  content: "ูุดุงุฑูุฉ ูุญุฏุซุฉ..."
```

**ุงูุตูุงุญูุงุช:** ุงููุงูู ููุท

**Response:**
```json
{
  "success": true,
  "message": "ุชู ุงูุชุญุฏูุซ ุจูุฌุงุญ.",
  "data": {
    "id": 1,
    "content": "ูุดุงุฑูุฉ ูุญุฏุซุฉ...",
    "author_name": "ุฃุญูุฏ",
    "author_id": 5,
    "created_at": "2024-10-14 15:30:00"
  }
}
```

---

### 5๏ธโฃ ุญุฐู ูุดุงุฑูุฉ

```bash
DELETE /api/posts/1
Headers: Authorization: Bearer YOUR_TOKEN
```

**ุงูุตูุงุญูุงุช:** ุงููุงูู ุฃู Admin

**Response:**
```json
{
  "success": true,
  "message": "ุชู ุงูุญุฐู ุจูุฌุงุญ."
}
```

---

### 6๏ธโฃ ุงูุจุญุซ

```bash
GET /api/posts/search?keyword=ุฑุงุฆุน
```

**Response:**
```json
{
  "success": true,
  "count": 5,
  "data": {
    "current_page": 1,
    "data": [
      {
        "id": 1,
        "content": "ูุดุงุฑูุฉ ุฑุงุฆุนุฉ...",
        "author_name": "ุฃุญูุฏ",
        "created_at": "ููุฐ ุณุงุนุฉ"
      }
    ],
    "total": 5
  }
}
```

---

### 7๏ธโฃ ูุดุงุฑูุงุชู (My Posts)

```bash
GET /api/posts/my-posts
Headers: Authorization: Bearer YOUR_TOKEN
```

**Response:**
```json
{
  "success": true,
  "data": {
    "data": [
      {
        "id": 1,
        "content": "ูุดุงุฑูุชู ุงูุฃููู...",
        "is_approved": true,
        "status": "ููุงูู ุนูููุง",
        "created_at": "ููุฐ ุณุงุนุฉ"
      },
      {
        "id": 2,
        "content": "ูุดุงุฑูุชู ุงูุซุงููุฉ...",
        "is_approved": false,
        "status": "ูู ุงูุชุธุงุฑ ุงูููุงููุฉ",
        "created_at": "ููุฐ 5 ุฏูุงุฆู"
      }
    ]
  }
}
```

---

### 8๏ธโฃ ุงููุดุงุฑูุงุช ูู ุงูุชุธุงุฑ ุงูููุงููุฉ (Admin ููุท)

```bash
GET /api/posts/pending
Headers: Authorization: Bearer ADMIN_TOKEN
```

**Response:**
```json
{
  "success": true,
  "count": 10,
  "data": {
    "data": [
      {
        "id": 5,
        "content": "ูุดุงุฑูุฉ ูู ุงูุชุธุงุฑ ุงูููุงููุฉ...",
        "author_name": "ูุญูุฏ",
        "author_id": 10,
        "created_at": "ููุฐ ุฏูููุชูู"
      }
    ]
  }
}
```

---

### 9๏ธโฃ ุงูููุงููุฉ ุนูู ูุดุงุฑูุฉ (Admin ููุท)

```bash
# ุงูููุงููุฉ
POST /api/posts/5/approve
Headers: Authorization: Bearer ADMIN_TOKEN
Body: form-data
  is_approved: true

# ุงูุฑูุถ
POST /api/posts/5/approve
Headers: Authorization: Bearer ADMIN_TOKEN
Body: form-data
  is_approved: false
```

**Response:**
```json
{
  "success": true,
  "message": "ุชู ุงูููุงููุฉ ุนูู ุงููุดุงุฑูุฉ ุจูุฌุงุญ.",
  "data": {
    "id": 5,
    "is_approved": true
  }
}
```

---

## ๐ ุงูุตูุงุญูุงุช

### ุฅูุดุงุก ูุดุงุฑูุฉ:
- **ูุณุชุฎุฏู ูุณุฌู** โ
- **ุฒุงุฆุฑ** โ 401 Unauthorized

### ุชุญุฏูุซ ูุดุงุฑูุฉ:
- **ุงููุงูู ููุท** โ
- **Admin** โ (ุญุชู Admin ูุง ููููู ุงูุชุญุฏูุซ)
- **ูุณุชุฎุฏู ุขุฎุฑ** โ 403 Forbidden

### ุญุฐู ูุดุงุฑูุฉ:
- **ุงููุงูู** โ
- **Admin** โ
- **ูุณุชุฎุฏู ุขุฎุฑ** โ 403 Forbidden

### ุนุฑุถ ูุจุญุซ:
- **ุงูุฌููุน** โ (ุงููุดุงุฑูุงุช ุงูููุงูู ุนูููุง ููุท)

### ุงูููุงููุฉ ุนูู ูุดุงุฑูุฉ:
- **Admin ููุท** โ
- **ุงููุณุชุฎุฏู ุงูุนุงุฏู** โ 403 Forbidden

**ููุฎุต:**
```
ุฅูุดุงุก     โ ูุณุชุฎุฏู ูุณุฌู (is_approved = false)
ููุงููุฉ    โ Admin ููุท
ุชุญุฏูุซ     โ ุงููุงูู ููุท
ุญุฐู       โ ุงููุงูู ุฃู Admin
ุนุฑุถ       โ ุงูุฌููุน (ุงูููุงูู ุนูููุง ููุท)
```

---

## ๐ ุณูุฑ ุนูู ุงููุดุงุฑูุฉ (Workflow)

### 1. ุงููุณุชุฎุฏู ููุดุฆ ูุดุงุฑูุฉ:
```bash
POST /api/posts
Headers: Authorization: Bearer USER_TOKEN
Body: { "content": "ูุดุงุฑูุฉ ุฌุฏูุฏุฉ..." }
```
โ **ุงูุญุงูุฉ:** `is_approved = false` (ูู ุงูุชุธุงุฑ ุงูููุงููุฉ)

### 2. ุงููุณุชุฎุฏู ูุฑู ูุดุงุฑูุชู ูู "ูุดุงุฑูุงุชู":
```bash
GET /api/posts/my-posts
Headers: Authorization: Bearer USER_TOKEN
```
โ **ุงููุชูุฌุฉ:** ูุฑู ูุดุงุฑูุชู ูุน status = "ูู ุงูุชุธุงุฑ ุงูููุงููุฉ"

### 3. Admin ูุฑุงุฌุน ุงููุดุงุฑูุงุช ุงููุนููุฉ:
```bash
GET /api/posts/pending
Headers: Authorization: Bearer ADMIN_TOKEN
```
โ **ุงููุชูุฌุฉ:** ูุฑู ุฌููุน ุงููุดุงุฑูุงุช ุบูุฑ ุงูููุงูู ุนูููุง

### 4. Admin ููุงูู ุนูู ุงููุดุงุฑูุฉ:
```bash
POST /api/posts/1/approve
Headers: Authorization: Bearer ADMIN_TOKEN
Body: { "is_approved": true }
```
โ **ุงูุญุงูุฉ:** `is_approved = true`

### 5. ุงููุดุงุฑูุฉ ุชุธูุฑ ููุฌููุน:
```bash
GET /api/posts
```
โ **ุงููุชูุฌุฉ:** ุงููุดุงุฑูุฉ ุชุธูุฑ ูู ุงููุงุฆูุฉ ุงูุนุงูุฉ

---

## โ Validation Rules

### ุนูุฏ ุงูุฅูุดุงุก ูุงูุชุญุฏูุซ:
- `content`: required, string, min:10, max:2000

---

## ๐ ุฌุฏูู ุงูููุงุฑูุฉ

| ุงูููุฒุฉ | ุงููุตุงุฆุฏ/ุงูุฏุฑูุณ | ุงูุฃููุงู | ุงููุดุงุฑูุงุช |
|--------|----------------|---------|-----------|
| **ุงูุฅูุดุงุก** | Admin ููุท | Admin ููุท | ูุณุชุฎุฏู ูุณุฌู |
| **ุงูุชุญุฏูุซ** | ุงููุงูู ุฃู Admin | ุงููุงูู ููุท | ุงููุงูู ููุท |
| **ุงูุญุฐู** | ุงููุงูู ุฃู Admin | ุงููุงูู ุฃู Admin | ุงููุงูู ุฃู Admin |
| **ุงูุชุนูููุงุช** | โ | โ | โ |
| **ุงูููุถูุฉ** | โ | โ | โ |
| **ุงููููุงุช** | โ | โ | โ |
| **ุงูุฎุตูุตูุฉ** | โ | โ | โ |

---

## ๐ ุฃูุซูุฉ Postman

### ุฅูุดุงุก ูุดุงุฑูุฉ:
```
POST http://localhost:8000/api/posts
Headers:
  Authorization: Bearer YOUR_TOKEN
Body: form-data
  content: ูุฐู ูุดุงุฑูุชู ุงูุฃููู ูู ุงููููุน...
```

### ุชุญุฏูุซ ูุดุงุฑูุฉ:
```
POST http://localhost:8000/api/posts/1/update
Headers:
  Authorization: Bearer YOUR_TOKEN
Body: form-data
  content: ูุดุงุฑูุฉ ูุญุฏุซุฉ ุจูุนูููุงุช ุฌุฏูุฏุฉ...
```

### ุญุฐู ูุดุงุฑูุฉ:
```
DELETE http://localhost:8000/api/posts/1
Headers:
  Authorization: Bearer YOUR_TOKEN
```

### ุงูุจุญุซ:
```
GET http://localhost:8000/api/posts/search?keyword=ุชุฌุฑุจุฉ
```

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. โ **ุจุฏูู ุชุนูููุงุช**: ุงููุดุงุฑูุงุช ูุง ุชุฏุนู ุงูุชุนูููุงุช (ูุธุงู ุจุณูุท)
2. โ **ุจุฏูู ููุถูุฉ**: ุงููุดุงุฑูุงุช ูุง ุชุฏุนู ุงูููุถูุฉ
3. โ **ุนุงูุฉ ููุฌููุน**: ุฌููุน ุงููุดุงุฑูุงุช ุนุงูุฉ (ูุง ููุฌุฏ is_private)
4. โ **ูุต ููุท**: content ูุตู ููุทุ ุจุฏูู ูููุงุช
5. โ **ุญุฏ ุงููุต**: min: 10 ุญุฑูุ max: 2000 ุญุฑู

---

## ๐ ุงูุฎุทูุฉ ุงูุชุงููุฉ

ุชุดุบูู Migration:
```bash
php artisan migrate
```

---

**ุฌุงูุฒ ููุงุณุชุฎุฏุงู! ๐**
